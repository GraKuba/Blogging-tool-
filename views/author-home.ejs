<!DOCTYPE html>
<html>
<head>
    <title>My Blog</title>
    <!-- Bootstrap CSS -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="main.css">
</head>
<body>
    <header class="bg-dark text-white text-center py-3">
        <h1>My Blog</h1>
        <p>by Jakub Grabarczyk</p>
        <a href="author-settings" class="settings-link text-white">Settings</a>
    </header>

    <div class="container mt-5">
        <div id="links" class="my-4 p-3 border bg-light">
            <h3 class="mb-3">Quick Links</h3>
            <ul class="list-group">
                <!-- List of existing links here -->
                <a href="list-users">List users!</a>
                <a href="add-user">Add user!</a>

            </ul>
        </div>

        <section id="drafts" class="mt-4">
            <h2>Draft Articles</h2>
            <ul class="list-group">
                <!-- List of drafts will be here -->
                <div>
                    <% if (drafts && drafts.length) { %>
                        <ul class="list-group">
                            <% drafts.forEach(function(draft) { %>
                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                    <div>
                                        <strong>Title:</strong> <%= draft.title %><br>
                                        <small><strong>Last Modified:</strong> <%= draft.last_modified %></small>
                                    </div>
                                    <div>
                                        <!-- Publish Button -->
                                        <form action="/publish-draft/<%= draft.draft_id %>" method="POST" style="display:inline;">
                                            <button type="submit" class="btn btn-success btn-sm">PUBLISH</button>
                                        </form>
                                        
                                        <!-- Edit Button -->
                                        <a href="/users/update-draft/<%= draft.article_id %>" class="btn btn-primary btn-sm">EDIT</a>
                                        
                                        <!-- Delete Button -->
                                        <form action="/users/delete-draft/<%= draft.article_id %>" method="POST" style="display:inline;">
                                            <button type="submit" class="btn btn-danger btn-sm">DELETE</button>
                                        </form>
                                    </div>
                                </li>
                            <% }); %>
                        </ul>
                    <% } else { %>
                        <p>No drafts available.</p>
                    <% } %>
                </div>
            </ul>
        </section>

        <section id="create-draft">
            <!-- The button that takes the user to ADD NEW DRAFT page is here -->
            <form action = "http://localhost:3000/users/new-draft">
                <button class="btn btn-success mt-2">New draft</button>
            </form>
        </section>

        <section id="published" class="mt-4">
            <h2>Published Articles</h2>
            <ul class="list-group">
                <!-- List of published articles will be here -->
                <div>
                    <% if (publishedArticles && publishedArticles.length) { %>
                        <ul class="list-group">
                            <% publishedArticles.forEach(function(article) { %>
                                <li class="list-group-item">
                                    <strong>Title:</strong> <%= article.title %><br>
                                    <small><strong>Published On:</strong> <%= article.published %></small>
                                </li>
                            <% }); %>
                        </ul>
                    <% } else { %>
                        <p>No published articles available.</p>
                    <% } %>
                </div>
            </ul>
        </section>
    </div>
</body>
</html>